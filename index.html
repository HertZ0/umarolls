<!DOCTYPE html>
<html>
<head>
  <title>Uma Rolls</title>
  <style>
    body {
      font-family: 'Monotype Kelk', 'Monotype KK', Arial, sans-serif;
      background: url('uma background.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    img {
      max-width: 300px;
      border: 2px solid #ccc;
      border-radius: 8px;
      margin: 20px;
      background: rgba(255,255,255,0.85);
      box-shadow: 0 4px 16px rgba(0,0,0,0.10);
      padding: 12px;
      display: block;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
    }
    #reset-timer {
      position: fixed;
      top: 10px;
      right: 20px;
      background: rgba(255,255,255,0.9);
      padding: 8px 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      z-index: 1000;
      color: #333;
    }
  </style>
</head>
<body>
  <div id="reset-timer" style="display:none;">Next reset: --:--:--</div>
  <h1>Uma Rolls!</h1>
  <p id="clickCount">Rolls: 0</p>
      <div style="display: flex; align-items: center; gap: 12px; justify-content: flex-start; margin-left: 40px; margin-top: 30px;">
        <button id="rollBtn" onclick="showRandomImage()">Roll For Uma!</button>
        <img src="rainbow_carats.png" alt="icon" style="width:32px; height:32px; display:inline-block;">
      </div>
  <div>
    <img id="randomImage" src="" alt="Random Image" style="display:none;">
  </div>
  <audio id="clickSound" src="click.mp3"></audio>
  <script>
    // List your image file names here
    const images = [
      "images tests/CG_Summer.png",
      "images tests/Cheval_Grand_29.png",
      "images tests/DJ_Casual.webp",
      "images tests/Dream_Journey_29.webp",
      "images tests/Fenomeno_29.webp",
      "images tests/Gold_Ship_29.webp",
      "images tests/Gold_Ship_casual.webp",
      "images tests/JP_Casual.png",
      "images tests/Jungle_Pocket_29.png",
      "images tests/King_Halo_29.webp",
      "images tests/Loves_Only_You_29.png",
      "images tests/LOY_Casual.png",
      "images tests/Matikanetannhauser_29.png",
      "images tests/Matikanetannhauser_casual.png",
      "images tests/Meishodotogame.png",
      "images tests/Meisho_Doto_casual.png",
      "images tests/Mejiro_Ramonu_29.png",
      "images tests/MR_Casual.png",
      "images tests/Nakayama_Festa_Game.png",
      "images tests/Orfevre_29.png",
      "images tests/Orfevre_Casual.png",
      "images tests/Sakurachiyonoogame.png",
      "images tests/SiL_Casual.png",
      "images tests/Special_Week_29.png",
      "images tests/Special_Week_casual.webp",
      "images tests/Stay_Gold_29.webp",
      "images tests/Still_in_Love_29.png",
      "images tests/Super_Creek_29.webp",
      "images tests/Symboli_Rudolf_29.webp",
      "images tests/T.M._Opera_O_29.webp",
      "images tests/Tamamo_Cross_29.webp",
      "images tests/Tamamo_Cross_casual.webp",
    ];

    // Counter and reset logic
    const COUNTER_KEY = 'rollCount';
    const RESET_KEY = 'rollResetTime';
    const RESET_INTERVAL = 24 * 60 * 60 * 1000; // 24 hours in ms

    function resetCounter() {
      count = 0;
      localStorage.setItem(COUNTER_KEY, count);
      localStorage.setItem(RESET_KEY, Date.now());
  const countElem = document.getElementById('clickCount');
  countElem.textContent = 'Rolls: ' + count;
  // Show timer if at least 1 roll
  document.getElementById('reset-timer').style.display = count > 0 ? 'block' : 'none';
    }

    // On load: check if 24 hours have passed since last reset
    let lastReset = Number(localStorage.getItem(RESET_KEY)) || Date.now();
    let now = Date.now();
    let count = Number(localStorage.getItem(COUNTER_KEY)) || 0;
    if (now - lastReset > RESET_INTERVAL) {
      resetCounter();
      lastReset = Date.now();
    } else {
      const countElem = document.getElementById('clickCount');
  countElem.textContent = 'Rolls: ' + count;
  document.getElementById('reset-timer').style.display = count > 0 ? 'block' : 'none';
    }

    function showRandomImage() {
      const rollBtn = document.getElementById('rollBtn');
      rollBtn.disabled = true;
      rollBtn.textContent = 'Please wait...';
      setTimeout(() => {
        rollBtn.disabled = false;
        rollBtn.textContent = 'Roll For Uma!';
  }, 2000);

      const img = document.getElementById('randomImage');
      const randomIndex = Math.floor(Math.random() * images.length);
      img.src = images[randomIndex];
      img.style.display = 'block';
      document.getElementById('clickSound').play();

      count++;
      localStorage.setItem(COUNTER_KEY, count);
      document.getElementById('clickCount').textContent = 'Rolls: ' + count;
      document.getElementById('reset-timer').style.display = count > 0 ? 'block' : 'none';
    }
    window.showRandomImage = showRandomImage;

    // Timer display
    function formatTime(ms) {
      if (ms < 0) ms = 0;
      const totalSeconds = Math.floor(ms / 1000);
      const hours = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const seconds = String(totalSeconds % 60).padStart(2, '0');
      return `${hours}:${minutes}:${seconds}`;
    }

    function updateResetTimer() {
      let lastReset = Number(localStorage.getItem(RESET_KEY)) || Date.now();
      let now = Date.now();
      let msLeft = RESET_INTERVAL - (now - lastReset);
      if (msLeft < 0) msLeft = 0;
      document.getElementById('reset-timer').textContent = 'Next reset: ' + formatTime(msLeft);
    }

    setInterval(updateResetTimer, 1000);
    updateResetTimer();

    // Keyboard shortcut: Ctrl+R to reset counter
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key.toLowerCase() === 'r') {
        e.preventDefault();
        resetCounter();
      }
    });
  </script>
</body>
</html>
